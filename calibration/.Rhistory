source("hectorwrapper.R")
alpha.doeclim = 1
mod1.time = 1750:2009
file = 'forcing_hindcast.csv'
forcing = read.csv( paste0(forcing.root,file), header=TRUE )
    forcing.root = "obs_constraints/"
forcing = read.csv( paste0(forcing.root,file), header=TRUE 
)
source("forcing_total.R")
ftot_1750 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod1.time[1],endyear=mod1.time[length(mod1.time)])
ftot_1850 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod2.time[1],endyear=mod2.time[length(mod2.time)])
mod2.time = 1850:2009
ftot_1850 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod2.time[1],endyear=mod2.time[length(mod2.time)])
n = c("S","diff")
v = c(3.0,1.0)
s = c("temperature","temperature")
forcing.file_1750 = "1750_temp_RF.csv"

df_out = data.frame(year = mod1.time,Ftot_constrain = ftot_1750)
write.table(df_out,paste0("test_tmp/",forcing.file_1750),quote=FALSE,row.names=FALSE,col.names=TRUE,sep=",")
df.out = data.frame(year=mod2.time,Ftot_constrain = ftot_1850)
write.talbe(df_out,paste0("test_tmp/",forcing.file_1850),quote=FALSE,row.names=FALSE,col.names=TRUE,sep=",")
write.table(df_out,paste0("test_tmp/",forcing.file_1850),quote=FALSE,row.names=FALSE,col.names=TRUE,sep=",")
out_1750 = hectorwrapper(n,v,s,working.dir="test_tmp/",forcing.file="forcing.file_1850",ini.template ="forcing_nolog.ini"  ,mod.time=mod1.time)
out_1750 = hectorwrapper(n,v,s,working.dir="test_tmp/",forcing.file="forcing.file_1850",ini.template ="../input_templates/forcing_nolog.ini"  ,mod.time=mod1.time)
out_1750 = hectorwrapper(n,v,s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template ="../input_templates/forcing_nolog.ini"  ,mod.time=mod1.time)
out_1750 = hectorwrapper(n,v,s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template ="../input_templates/forcing_nolog.ini"  ,mod.time=mod1.time)
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template ="../input_templates/forcing_nolog.ini"  ,mod.time=mod1.time)
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template ="../input_templates/forcing_nolog.ini"  ,mod.time=mod1.time)
forcing.file_1750
ini.template = "../input_templates/forcing_nolog.ini"
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template =ini.template  ,mod.time=mod1.time)
getwd()
setwd("/data/keeling/a/bvegawe2/hector_github/hector/R/calibration/")
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template =ini.template  ,mod.time=mod1.time)
out_1850 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1850,ini.template =ini.template  ,mod.time=mod2.time)
out_1750
v

out1850
out_1850
getwd()
source("forcing_total.R")
ftot_1850 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod2.time[1],endyear=mod2.time[length(mod2.time)])
ftot_1750 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod1.time[1],endyear=mod1.time[length(mod1.time)])
ftot_1750
write.table(df_out,paste0("test_tmp/",forcing.file_1750),quote=FALSE,row.names=FALSE,col.names=TRUE,sep=",")
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template =ini.template  ,mod.time=mod1.time)
out_1750
df_out = data.frame(year = mod1.time,Ftot_constrain = ftot_1750)
write.table(df_out,paste0("test_tmp/",forcing.file_1750),quote=FALSE,row.names=FALSE,col.names=TRUE,sep=",")
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template =ini.template  ,mod.time=mod1.time)
out_1750
mod1.time
mod1.time = 1749:2009
ftot_1750 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod1.time[1],endyear=mod1.time[length(mod1.time)])
source("forcing_total.R")
ftot_1750 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod1.time[1],endyear=mod1.time[length(mod1.time)])
ftot_1750 = forcing_total(forcing,alpha.doeclim,l.project=FALSE,begyear=mod1.time[1]+1,endyear=mod1.time[length(mod1.time)])
df_out = data.frame(year = mod1.time,Ftot_constrain = ftot_1750)
write.table(df_out,paste0("test_tmp/",forcing.file_1750),quote=FALSE,row.names=FALSE,col.names=TRUE,sep=",")
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template =ini.template  ,mod.time=mod1.time)
out_1750
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template =ini.template  ,mod.time=c(1848,mod1.time))
out_1750
mod.time
out_1750 = hectorwrapper(par.names=n,par.vals=v,par.sections=s,working.dir="test_tmp/",forcing.file=forcing.file_1750,ini.template =ini.template  ,mod.time=c(1748,mod1.time))
out_1750
exit()
q()
